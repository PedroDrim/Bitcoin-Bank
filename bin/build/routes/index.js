"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var list_1=require("../model/list"),person_1=require("../model/person"),_=require("lodash"),IndexRoute=function(){function e(e){this.router=e,this.createList(),this.routesForGET(),this.routesForPOST(),this.routesForPUT(),this.routesForDELETE()}return e.prototype.createList=function(){this.list=new list_1.List,this.list.addPerson(new person_1.Person("000-000-000-01","Joao",12)),this.list.addPerson(new person_1.Person("000-000-000-02","Maria",10)),this.list.addPerson(new person_1.Person("000-000-000-03","José",25))},e.prototype.routesForGET=function(){this.router.get("/",function(e,o){o.render("index",{prop:{title:"Express",name:"test"}})})},e.prototype.routesForPOST=function(){var e=this;this.router.post("/",function(o,s){if(_.isEmpty(o.body))s.status(400).send("Não foi possivel adicionar o elemento, verifique os parametros.");else{o.params.cpf;var t=new person_1.Person(o.body.cpf,o.body.name,o.body.age);e.list.addPerson(t),s.send("Elemento adicionado com sucesso.")}}),this.router.post("/:cpf",function(o,s){var t=o.params.cpf,r=e.list.getPersonByCPF(t);_.isEmpty(r)?s.status(400).send("Não foi possivel encontrar o elemento."):s.json(r)}),this.router.post("/get/list",function(o,s){var t=e.list.getList();_.isEmpty(t)?s.status(400).send("Lista vazia."):s.json(t)})},e.prototype.routesForPUT=function(){var e=this;this.router.put("/:cpf",function(o,s){if(_.isEmpty(o.body))s.status(400).send("Não foi possivel adicionar o elemento, verifique os parametros.");else{var t=o.params.cpf,r=new person_1.Person(o.body.cpf,o.body.name,o.body.age);e.list.updatePersonByCPF(t,r)?s.send("Elemento atualizado com sucesso."):s.status(400).send("Não foi possivel atualizar o elemento, verifique os parametros.")}})},e.prototype.routesForDELETE=function(){var e=this;this.router.delete("/:cpf",function(o,s){var t=o.params.cpf;e.list.removePersonByCPF(t)?s.send("Elemento removido com sucesso."):s.status(400).send("Não foi possivel remover o elemento, verifique os parametros.")})},e}();exports.IndexRoute=IndexRoute;